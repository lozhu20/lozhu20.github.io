<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="baidu-site-verification" content="codeva-OBV0UPgBod" />
    <meta name="msvalidate.01" content="B9019CE3751A15D63E78AF8679980069" />
    <meta name="description" content="内容概要 SpringBoot入门 SpringBoot配置 SpringBoot与日志 SpringBoot与Web开发 SpringBoot与Docker SpringBoot与数据访问 SpringBoot启动配置原理 SpringBoot自定义Starters SpringBoot与缓存 SpringBoot与消息 SpringBoot与检索 SpringBoot与任务 SpringBoo">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot基础学习笔记">
<meta property="og:url" content="https://zhu.happy365.day/2019/01/01/110f3650bd4f/index.html">
<meta property="og:site_name" content="🐷&#39;s 部落格">
<meta property="og:description" content="内容概要 SpringBoot入门 SpringBoot配置 SpringBoot与日志 SpringBoot与Web开发 SpringBoot与Docker SpringBoot与数据访问 SpringBoot启动配置原理 SpringBoot自定义Starters SpringBoot与缓存 SpringBoot与消息 SpringBoot与检索 SpringBoot与任务 SpringBoo">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://image.youyou-2608.com/springboot/20180909151509.png">
<meta property="og:image" content="https://image.youyou-2608.com/springboot/google-chrome_20180909152808.png">
<meta property="og:image" content="https://image.youyou-2608.com/springboot/20180913201726.jpg">
<meta property="og:image" content="https://image.youyou-2608.com/springboot/20180913202351.jpg">
<meta property="og:image" content="https://image.youyou-2608.com/springboot/concrete-bindings.png">
<meta property="og:image" content="https://image.youyou-2608.com/springboot/legacy.png">
<meta property="og:image" content="https://image.youyou-2608.com/springboot/irei.png">
<meta property="og:image" content="https://image.youyou-2608.com/springboot/webjars.png">
<meta property="og:image" content="https://image.youyou-2608.com/springboot/DeepinScreenshot_select-area_20181001125611.png">
<meta property="og:image" content="https://image.youyou-2608.com/springboot/international.png">
<meta property="og:image" content="https://image.youyou-2608.com/springboot/paramterizable.png">
<meta property="article:published_time" content="2019-01-01T08:29:35.000Z">
<meta property="article:modified_time" content="2025-11-02T01:35:33.190Z">
<meta property="article:author" content="zhu">
<meta property="article:tag" content="SpringBoot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://image.youyou-2608.com/springboot/20180909151509.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>SpringBoot基础学习笔记</title>
    <!-- async scripts -->
    <!-- Google Analytics -->

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XMGS491MQF"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XMGS491MQF');
  </script>


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="🐷's 部落格" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="modal" class="modal">
  <span id="modal_close_btn" class="modal-close-btn">x</span>
  <img id="modal_image" class="modal-image">
  <!-- <div id="caption"></div> -->
</div>

      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="顶部" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/archives/">归档</a></li><!--
     --><!--
       --><li><a href="/friends/">友链</a></li><!--
     --><!--
       --><li><a href="/about/">关于</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="上一篇" href="/2019/01/03/8923673d5906/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="下一篇" href="/2018/12/02/e664f0e2c371/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="返回顶部" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="分享文章" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zhu.happy365.day/2019/01/01/110f3650bd4f/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li> -->
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&text=SpringBoot基础学习笔记"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&title=SpringBoot基础学习笔记"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&is_video=false&description=SpringBoot基础学习笔记"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li> -->
  <li><a class="icon" href="mailto:?subject=SpringBoot基础学习笔记&body=Check out this article: https://zhu.happy365.day/2019/01/01/110f3650bd4f/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&title=SpringBoot基础学习笔记"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&title=SpringBoot基础学习笔记"><i class="fab fa-reddit " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&title=SpringBoot基础学习笔记"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&title=SpringBoot基础学习笔记"><i class="fab fa-digg " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&name=SpringBoot基础学习笔记&description=&lt;h2 id=&#34;内容概要&#34;&gt;&lt;a href=&#34;#内容概要&#34; class=&#34;headerlink&#34; title=&#34;内容概要&#34;&gt;&lt;/a&gt;内容概要&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;SpringBoot入门&lt;/li&gt;
&lt;li&gt;SpringBoot配置&lt;/li&gt;
&lt;li&gt;SpringBoot与日志&lt;/li&gt;
&lt;li&gt;SpringBoot与Web开发&lt;/li&gt;
&lt;li&gt;SpringBoot与Docker&lt;/li&gt;
&lt;li&gt;SpringBoot与数据访问&lt;/li&gt;
&lt;li&gt;SpringBoot启动配置原理&lt;/li&gt;
&lt;li&gt;SpringBoot自定义Starters&lt;/li&gt;
&lt;li&gt;SpringBoot与缓存&lt;/li&gt;
&lt;li&gt;SpringBoot与消息&lt;/li&gt;
&lt;li&gt;SpringBoot与检索&lt;/li&gt;
&lt;li&gt;SpringBoot与任务&lt;/li&gt;
&lt;li&gt;SpringBoot与安全&lt;/li&gt;
&lt;li&gt;SpringBoot与分布式&lt;/li&gt;
&lt;li&gt;SpringBoot与开发热部署&lt;/li&gt;
&lt;li&gt;SpringBoot与监控管理&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;第一章-SpringBoot入门&#34;&gt;&lt;a href=&#34;#第一章-SpringBoot入门&#34; class=&#34;headerlink&#34; title=&#34;第一章 SpringBoot入门&#34;&gt;&lt;/a&gt;第一章 SpringBoot入门&lt;/h2&gt;&lt;h3 id=&#34;1-1-SpringBoot简介&#34;&gt;&lt;a href=&#34;#1-1-SpringBoot简介&#34; class=&#34;headerlink&#34; title=&#34;1.1 SpringBoot简介&#34;&gt;&lt;/a&gt;1.1 SpringBoot简介&lt;/h3&gt;&lt;p&gt;特点：约定大于配置；去繁从简；&lt;/p&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&t=SpringBoot基础学习笔记"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li> -->
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E6%A6%82%E8%A6%81"><span class="toc-number">1.</span> <span class="toc-text">内容概要</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-SpringBoot%E5%85%A5%E9%97%A8"><span class="toc-number">2.</span> <span class="toc-text">第一章 SpringBoot入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-SpringBoot%E7%AE%80%E4%BB%8B"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 SpringBoot简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E5%BE%AE%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.2.</span> <span class="toc-text">1.2 微服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-number">2.3.</span> <span class="toc-text">1.3 开发环境配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%BA%94%E7%94%A8%EF%BC%9AHelloWorld"><span class="toc-number">2.4.</span> <span class="toc-text">1.4 第一个应用：HelloWorld</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-HelloWorld%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6"><span class="toc-number">2.5.</span> <span class="toc-text">1.5 HelloWorld原理探究</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-%E4%B8%BB%E7%A8%8B%E5%BA%8F%E7%B1%BB%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6"><span class="toc-number">2.6.</span> <span class="toc-text">1.6 主程序类原理探究</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-SpringBoot%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E5%99%A8"><span class="toc-number">2.7.</span> <span class="toc-text">1.7 SpringBoot项目初始化器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-SpringBoot%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">第二章 SpringBoot配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-SpringBoot%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 SpringBoot配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-YAML%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 YAML基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%B3%A8%E5%85%A5%EF%BC%9A"><span class="toc-number">3.2.1.</span> <span class="toc-text">2.2.1配置文件注入：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-Value%E6%B3%A8%E5%85%A5%E5%80%BC"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.2.2 @Value注入值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-Value%E5%92%8C-ConfigurationProperties%E8%8E%B7%E5%8F%96%E5%80%BC%E6%AF%94%E8%BE%83%EF%BC%9A"><span class="toc-number">3.2.3.</span> <span class="toc-text">2.2.3 @Value和@ConfigurationProperties获取值比较：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-Value%E5%92%8C-ConfigurationProperties%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">3.2.4.</span> <span class="toc-text">2.2.4 @Value和@ConfigurationProperties的比较</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-PropertySource%E5%92%8C-ImportSource"><span class="toc-number">3.3.</span> <span class="toc-text">2.3 @PropertySource和@ImportSource</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-PropertySource%E8%8E%B7%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E5%80%BC%EF%BC%9A"><span class="toc-number">3.3.1.</span> <span class="toc-text">2.3.1 @PropertySource获取配置文件的值：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-ImportSource%EF%BC%9A%E5%AF%BC%E5%85%A5Spring%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E6%98%AF%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%E7%94%9F%E6%95%88%E3%80%82"><span class="toc-number">3.3.2.</span> <span class="toc-text">2.3.2 @ImportSource：导入Spring配置文件，是配置文件中的配置生效。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-3-SpringBoot%E6%8E%A8%E8%8D%90%E7%9A%84%E6%B7%BB%E5%8A%A0%E7%BB%84%E4%BB%B6%E6%96%B9%E5%BC%8F"><span class="toc-number">3.3.3.</span> <span class="toc-text">2.3.3 SpringBoot推荐的添加组件方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="toc-number">3.4.</span> <span class="toc-text">2.4 配置文件占位符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-Profile%E5%A4%9A%E7%8E%AF%E5%A2%83%E6%94%AF%E6%8C%81"><span class="toc-number">3.5.</span> <span class="toc-text">2.5 Profile多环境支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E4%BD%8D%E7%BD%AE"><span class="toc-number">3.6.</span> <span class="toc-text">2.6 配置文件加载位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-%E5%A4%96%E9%83%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="toc-number">3.7.</span> <span class="toc-text">2.7 外部配置文件加载顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86"><span class="toc-number">3.8.</span> <span class="toc-text">2.8 自动配置原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9-Conditional%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">3.9.</span> <span class="toc-text">2.9 @Conditional自动配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-SpringBoot%E4%B8%8E%E6%97%A5%E5%BF%97"><span class="toc-number">4.</span> <span class="toc-text">第三章 SpringBoot与日志</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 日志框架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-SLF4J%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 SLF4J的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-%E5%A6%82%E4%BD%95%E5%9C%A8%E7%B3%BB%E7%BB%9F%E4%B8%AD%E4%BD%BF%E7%94%A8SLF4J"><span class="toc-number">4.2.1.</span> <span class="toc-text">3.2.1 如何在系统中使用SLF4J</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-%E9%81%97%E7%95%99%E9%97%AE%E9%A2%98"><span class="toc-number">4.2.2.</span> <span class="toc-text">3.2.2 遗留问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-SpringBoot%E6%97%A5%E5%BF%97%E5%85%B3%E7%B3%BB"><span class="toc-number">4.3.</span> <span class="toc-text">3.3 SpringBoot日志关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-SpringBoot%E9%BB%98%E8%AE%A4%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE"><span class="toc-number">4.4.</span> <span class="toc-text">3.4 SpringBoot默认日志配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E5%92%8C%E6%97%A5%E5%BF%97profile%E5%8A%9F%E8%83%BD"><span class="toc-number">4.5.</span> <span class="toc-text">3.5 指定日志文件和日志profile功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E5%88%87%E6%8D%A2%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6"><span class="toc-number">4.6.</span> <span class="toc-text">3.6 切换日志框架</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-SpringBoot%E4%B8%8EWeb%E5%BC%80%E5%8F%91"><span class="toc-number">5.</span> <span class="toc-text">第四章 SpringBoot与Web开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-webjar%E4%B8%8E%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84%E8%A7%84%E5%88%99"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 webjar与静态资源映射规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%BC%95%E5%85%A5Thymeleaf%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 引入Thymeleaf模板引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-Thymeleaf%E8%AF%AD%E6%B3%95"><span class="toc-number">5.3.</span> <span class="toc-text">4.3 Thymeleaf语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-SpringMVC%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8A%9F%E8%83%BD"><span class="toc-number">5.4.</span> <span class="toc-text">4.4 SpringMVC自动配置功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-1-SpringMVC%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">5.4.1.</span> <span class="toc-text">4.4.1 SpringMVC自动配置项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-2-%E6%89%A9%E5%B1%95SpringMVC%E9%85%8D%E7%BD%AE"><span class="toc-number">5.4.2.</span> <span class="toc-text">4.4.2 扩展SpringMVC配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-3-%E5%85%A8%E9%9D%A2%E6%8E%A5%E7%AE%A1SpringMVC"><span class="toc-number">5.4.3.</span> <span class="toc-text">4.4.3 全面接管SpringMVC</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E5%BC%95%E5%85%A5%E8%B5%84%E6%BA%90"><span class="toc-number">5.5.</span> <span class="toc-text">4.5 引入资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-number">5.6.</span> <span class="toc-text">4.6 国际化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">5.7.</span> <span class="toc-text">4.7 拦截器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-CRUD%E5%AE%9E%E9%AA%8C"><span class="toc-number">5.8.</span> <span class="toc-text">4.8 CRUD实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-1-%E5%AE%9E%E9%AA%8C%E8%A6%81%E6%B1%82"><span class="toc-number">5.8.1.</span> <span class="toc-text">4.8.1 实验要求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-2-%E5%85%AC%E5%85%B1%E9%A1%B5%E9%9D%A2%E6%8A%BD%E5%8F%96%E2%80%94%E5%88%97%E8%A1%A8%E9%A1%B5"><span class="toc-number">5.8.2.</span> <span class="toc-text">4.8.2 公共页面抽取—列表页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-3-%E9%93%BE%E6%8E%A5%E9%AB%98%E4%BA%AE-%E5%88%97%E8%A1%A8%E5%AE%8C%E6%88%90"><span class="toc-number">5.8.3.</span> <span class="toc-text">4.8.3 链接高亮&amp;列表完成</span></a></li></ol></li></ol></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        SpringBoot基础学习笔记
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">zhu</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2019-01-01T08:29:35.000Z" class="dt-published" itemprop="datePublished">2019-01-01</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>
    </div>


      
    <!-- <div class="article-tag"> -->
    <div class="article-category">
        <i class="fa-solid fa-tag"></i>
        <!-- <a class="p-category" href="/tags/SpringBoot/" rel="tag">SpringBoot</a> -->
        <a class="category-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h2 id="内容概要"><a href="#内容概要" class="headerlink" title="内容概要"></a>内容概要</h2><ol>
<li>SpringBoot入门</li>
<li>SpringBoot配置</li>
<li>SpringBoot与日志</li>
<li>SpringBoot与Web开发</li>
<li>SpringBoot与Docker</li>
<li>SpringBoot与数据访问</li>
<li>SpringBoot启动配置原理</li>
<li>SpringBoot自定义Starters</li>
<li>SpringBoot与缓存</li>
<li>SpringBoot与消息</li>
<li>SpringBoot与检索</li>
<li>SpringBoot与任务</li>
<li>SpringBoot与安全</li>
<li>SpringBoot与分布式</li>
<li>SpringBoot与开发热部署</li>
<li>SpringBoot与监控管理</li>
</ol>
<h2 id="第一章-SpringBoot入门"><a href="#第一章-SpringBoot入门" class="headerlink" title="第一章 SpringBoot入门"></a>第一章 SpringBoot入门</h2><h3 id="1-1-SpringBoot简介"><a href="#1-1-SpringBoot简介" class="headerlink" title="1.1 SpringBoot简介"></a>1.1 SpringBoot简介</h3><p>特点：约定大于配置；去繁从简；</p>
<span id="more"></span>



<p>背景： </p>
<p>J2EE笨重的开发；</p>
<p>繁多的配置；</p>
<p>低下的效率；</p>
<p>复杂的部署；</p>
<p>第三方技术集成难度大；</p>
<p>解决方案：</p>
<p>SpringBoot：一站式J2EE的解决方案；</p>
<p>SpringCloud：分布式整体解决方案；</p>
<p>优点：</p>
<p>快速创建可独立运行的Spring项目并与主流框架集成；</p>
<p>starters自动依赖管理及版本控制；</p>
<p>使用嵌入的Servlet容器，应用无需打包；</p>
<p>大量的自动配置，简化开发，也可修改默认值；</p>
<p>无需配置XML，无代码生成，开箱即用；</p>
<p>准生产环境的运行时应用监控；</p>
<p>是对Spring技术栈的一个整合。</p>
<hr>
<h3 id="1-2-微服务"><a href="#1-2-微服务" class="headerlink" title="1.2 微服务"></a>1.2 微服务</h3><p>单体应用： 开发，测试，部署简单；</p>
<p>微服务：功能拆分，灵活配置，通信协作。</p>
<p>SpringBoot官网 &gt; 微服务文档</p>
<hr>
<h3 id="1-3-开发环境配置"><a href="#1-3-开发环境配置" class="headerlink" title="1.3 开发环境配置"></a>1.3 开发环境配置</h3><ol>
<li>JDK版本；</li>
<li>maven版本；</li>
<li>开发工具选择；</li>
<li>框架版本选择；</li>
</ol>
<hr>
<h3 id="1-4-第一个应用：HelloWorld"><a href="#1-4-第一个应用：HelloWorld" class="headerlink" title="1.4 第一个应用：HelloWorld"></a>1.4 第一个应用：HelloWorld</h3><ol>
<li>创建一个Maven项目；</li>
<li>导入SpringBoot相关依赖；</li>
<li>编写主程序，启动SpringBoot应用；</li>
</ol>
<pre><code class="java">@SpringBootApplication
public class MainApp &#123;
    public static void main(String[] args) &#123;
        SpringApplication.run(MainApp.class, args);
    &#125;
&#125;
</code></pre>
<ol>
<li>编写业务逻辑，服务；</li>
<li>运行主程序测试；</li>
<li>打包jar包：</li>
</ol>
<pre><code class="xml">&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
<p>运行jar包：</p>
<pre><code class="shell">java -jar xxx.jar
</code></pre>
<hr>
<h3 id="1-5-HelloWorld原理探究"><a href="#1-5-HelloWorld原理探究" class="headerlink" title="1.5 HelloWorld原理探究"></a>1.5 HelloWorld原理探究</h3><p>POM文件：</p>
<ol>
<li>父项目：</li>
</ol>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;
父项目：
</code></pre>
<p>SpringBoot的<strong>版本仲裁中心</strong>，导入依赖不需要写版本号。</p>
<ol>
<li>导入的依赖：</li>
</ol>
<pre><code class="xml">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<p>spring-boot-starter-web：</p>
<p>场景启动器：帮我们导入web模块正常运行所需的依赖的组件；</p>
<p>将所有的功能场景抽取出来，做成启动器，只需要在项目中导入相关的starter，所有的依赖都会被导入，版本由spring-boot自动管理。</p>
<hr>
<h3 id="1-6-主程序类原理探究"><a href="#1-6-主程序类原理探究" class="headerlink" title="1.6 主程序类原理探究"></a>1.6 主程序类原理探究</h3><pre><code class="java">package com.hello;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

/**
 * @author zhulongkun20@163.com
 * @since 18-9-9 下午2:28
 */
@SpringBootApplication
public class MainApp &#123;
    public static void main(String[] args) &#123;
        SpringApplication.run(MainApp.class, args);
    &#125;
&#125;
</code></pre>
<p>@SpringBootApplication标注在某个类上，指定SpringBoot的主配置类，由这个类来启动SpringBoot应用。</p>
<pre><code class="java">@Target(&#123;ElementType.TYPE&#125;)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@SpringBootConfiguration
@EnableAutoConfiguration
@ComponentScan(
    excludeFilters = &#123;@Filter(
    type = FilterType.CUSTOM,
    classes = &#123;TypeExcludeFilter.class&#125;
), @Filter(
    type = FilterType.CUSTOM,
    classes = &#123;AutoConfigurationExcludeFilter.class&#125;
)&#125;
</code></pre>
<p>@SpringBootConfiguration：标注在某个类上，表示该类是SpringBoot的配置类。</p>
<p>@Configuration：配置类上标注该类。配置类也是一个组件：@Component；</p>
<p>@EnableAutoConfiguration：开启自动配置，</p>
<pre><code>需要配置的东西由SpringBoot自动配置。
</code></pre>
<pre><code class="xml">@AutoConfigurationPackage
@Import(&#123;AutoConfigurationImportSelector.class&#125;)
</code></pre>
<pre><code>@AutoConfigurationPackage：自动配置包，给容器导入一个组件，导入的组件由AutoConfigurationPackage.Registrar；

将主配置类所在的及以下所有的子包里的所有组件添加到Spring容器中。
</code></pre>
<pre><code class="java">@Import(&#123;Registrar.class&#125;)
public @interface AutoConfigurationPackage &#123;
&#125;
</code></pre>
<pre><code>@Import：给容器中导入一些组件：AutoConfigurationImportSelector：选择哪些组件导入。

    给容器中导入自动配置类（xxxAutoConfiguration）：给容器中导入场景需要的所有的组件并配置好这些组件。
</code></pre>
<p><img src="https://image.youyou-2608.com/springboot/20180909151509.png" alt="配置类"></p>
<pre><code class="java">    protected List&lt;String&gt; getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes) &#123;
        List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(this.getSpringFactoriesLoaderFactoryClass(), this.getBeanClassLoader());
        Assert.notEmpty(configurations, &quot;No auto configuration classes found in META-INF/spring.factories. If you are using a custom packaging, make sure that file is correct.&quot;);
        return configurations;
    &#125;
</code></pre>
<p><strong>SpringBoot启动的时候从类路径下META-INF&#x2F;spring.factories中获取EnableAutoConfiguration指定的值，将这些值导入到Spring容器中，自动配置类生效。</strong></p>
<p>需要自己指定的配置，已经由配置类自动配置好。</p>
<p>org&#x2F;springframework&#x2F;boot&#x2F;spring-boot-autoconfigure&#x2F;2.0.4.RELEASE&#x2F;spring-boot-autoconfigure-2.0.4.RELEASE.jar!&#x2F;META-INF&#x2F;spring.factories</p>
<p><img src="https://image.youyou-2608.com/springboot/google-chrome_20180909152808.png" alt="自动配置类"></p>
<hr>
<h3 id="1-7-SpringBoot项目初始化器"><a href="#1-7-SpringBoot项目初始化器" class="headerlink" title="1.7 SpringBoot项目初始化器"></a>1.7 SpringBoot项目初始化器</h3><p>SpringBoot项目向导：</p>
<p><strong>IDEA &gt; New Project &gt; Spring Initializer &gt; 项目详情 &gt; 导入相关场景依赖。</strong></p>
<p>@RestController注解：</p>
<p>@ResponseBody和@RequestMapping注解组合。</p>
<ol>
<li>自动生成主程序；</li>
<li>&#x2F;resources中目录结构：<ol>
<li>static：保存静态资源；</li>
<li>templates：存所有的模板页面(使用嵌入的tomcat，不支持JSP页面，但是可以使用模板引擎)；</li>
<li>application.properties：SpringBoot的默认配置文件。</li>
</ol>
</li>
</ol>
<hr>
<h2 id="第二章-SpringBoot配置文件"><a href="#第二章-SpringBoot配置文件" class="headerlink" title="第二章 SpringBoot配置文件"></a>第二章 SpringBoot配置文件</h2><h3 id="2-1-SpringBoot配置文件"><a href="#2-1-SpringBoot配置文件" class="headerlink" title="2.1 SpringBoot配置文件"></a>2.1 SpringBoot配置文件</h3><p>SpringBoot使用全局配置文件，配置文件名是固定的。</p>
<ul>
<li>application.properties；</li>
<li>application.yml。</li>
</ul>
<p>配置文件的作用：<strong>修改SpringBoot默认配置。</strong></p>
<p>YAML：不仅仅是一个标记语言，以数据为中心，比json和xml更适合做配置文件。</p>
<p>YAML：</p>
<pre><code class="yaml">server:
    port: 8081
</code></pre>
<hr>
<h3 id="2-2-YAML基本语法"><a href="#2-2-YAML基本语法" class="headerlink" title="2.2 YAML基本语法"></a>2.2 YAML基本语法</h3><p>key: value    表示键值对，冒号之后的空格必须有的，以空格来控制层级关系。</p>
<pre><code class="yaml">server: 
    port: 8081
    path: /hello
</code></pre>
<p><strong>属性和值大小写敏感。</strong></p>
<p>字面量：字符串默认不加单引号和双引号，<strong>双引号会转义特殊字符</strong>，<strong>单引号会转义特殊字符</strong>。</p>
<pre><code class="yaml">k: v
</code></pre>
<p>对象(属性和值)：本质是键值对。</p>
<pre><code class="yaml">student:
    name: 张三
    age: 14
</code></pre>
<p>行内写法：</p>
<pre><code class="yaml">student: &#123;name: 张三,age: 15&#125;
</code></pre>
<p>数组(List, Set)：</p>
<p>用-表示数组中的一个元素。</p>
<pre><code class="yaml">pets:
    - cat
    - dog
    - pig
</code></pre>
<p>行内写法：</p>
<pre><code class="yaml">pets: [cat,dog,pig]
</code></pre>
<h4 id="2-2-1配置文件注入："><a href="#2-2-1配置文件注入：" class="headerlink" title="2.2.1配置文件注入："></a>2.2.1配置文件注入：</h4><p>application.yml文件：</p>
<pre><code class="yaml">server:
  port: 8081

person:
  name: 张三
  age: 18
  alive: true
  birth: 2018/09/11
  classes:
    - v1
    - v2
  map:
    k1: v1
    k2: v2
  dog:
    name: dog
    age: 4
</code></pre>
<p>JavaBean：</p>
<pre><code class="java">package com.demo.po;

import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

import java.util.Date;
import java.util.List;
import java.util.Map;

/**
 * @author zhulongkun20@163.com
 * @since 18-9-11 下午8:36
 */
@Component
@ConfigurationProperties(prefix = &quot;person&quot;)
public class Student &#123;
    private String name;
    private Integer age;
    private boolean alive;
    private Date birth;
    private List&lt;String&gt; classes;
    private Map&lt;String, Object&gt; map;
    private Dog dog;

    @Override
    public String toString() &#123;
        return &quot;Student&#123;&quot; +
                &quot;name=&#39;&quot; + name + &#39;\&#39;&#39; +
                &quot;, age=&quot; + age +
                &quot;, alive=&quot; + alive +
                &quot;, birth=&quot; + birth +
                &quot;, classes=&quot; + classes +
                &quot;, map=&quot; + map +
                &quot;, dog=&quot; + dog +
                &#39;&#125;&#39;;
    &#125;
&#125;
</code></pre>
<p>可以导入配置文件处理器之后，编写配置文件有IDE智能提示。</p>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
    &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;
</code></pre>
<p>@ConfigurationProperties(prefix &#x3D; “person”)获取配置文件的值。</p>
<p><strong>application.properties乱码问题：file encoding勾选将properties配置文件转换成ascii码。</strong></p>
<p>配置文件的旧写法：</p>
<pre><code class="xml">&lt;bean class=&quot;person&quot;&gt;
    &lt;property name=&quot;lastName&quot; value=&quot;zhagsa&quot;/&gt;
&lt;/bean&gt;
</code></pre>
<h4 id="2-2-2-Value注入值"><a href="#2-2-2-Value注入值" class="headerlink" title="2.2.2 @Value注入值"></a>2.2.2 @Value注入值</h4><pre><code class="java">public class Student &#123;
    @Value(&quot;$&#123;person.name&#125;&quot;)
    private String name;
    @Value(&quot;#&#123;11*2&#125;&quot;)
    private Integer age;
    @Value(&quot;true&quot;)
    private boolean alive;
    private Date birth;
    private List&lt;String&gt; classes;
    private Map&lt;String, Object&gt; map;
    private Dog dog;
&#125;
</code></pre>
<h4 id="2-2-3-Value和-ConfigurationProperties获取值比较："><a href="#2-2-3-Value和-ConfigurationProperties获取值比较：" class="headerlink" title="2.2.3 @Value和@ConfigurationProperties获取值比较："></a>2.2.3 @Value和@ConfigurationProperties获取值比较：</h4><table>
<thead>
<tr>
<th></th>
<th>@ConfigurationProperties</th>
<th>@Value</th>
</tr>
</thead>
<tbody><tr>
<td>功能</td>
<td>批量注入配置文件中的属性</td>
<td>单个指定变量的值</td>
</tr>
<tr>
<td>松散绑定</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>SpEL</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>JSR303数据校验</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>复杂类型封装</td>
<td>支持</td>
<td>不支持</td>
</tr>
</tbody></table>
<h4 id="2-2-4-Value和-ConfigurationProperties的比较"><a href="#2-2-4-Value和-ConfigurationProperties的比较" class="headerlink" title="2.2.4 @Value和@ConfigurationProperties的比较"></a>2.2.4 @Value和@ConfigurationProperties的比较</h4><p><strong>如果只是在某个业务逻辑中需要获取一下配置文件中的值，那就用@Value；如果专门编写了Java bean和配置文件进行映射，就直接使用@ConfigurationProperties。</strong></p>
<pre><code class="java">package com.demo.controller;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

/**
 * @author zhulongkun20@163.com
 * @since 18-9-12 下午9:30
 */
@RestController
public class DemoController &#123;
    @Value(&quot;$&#123;person.name&#125;&quot;)
    private String name;

    @RequestMapping(&quot;/demo.do&quot;)
    public String sayHello() &#123;
        return &quot;Hello, &quot; + name;
    &#125;
&#125;
</code></pre>
<hr>
<h3 id="2-3-PropertySource和-ImportSource"><a href="#2-3-PropertySource和-ImportSource" class="headerlink" title="2.3 @PropertySource和@ImportSource"></a>2.3 @PropertySource和@ImportSource</h3><p><strong>@ConfigurationProperties默认从全局配置文件中获取值。</strong></p>
<h4 id="2-3-1-PropertySource获取配置文件的值："><a href="#2-3-1-PropertySource获取配置文件的值：" class="headerlink" title="2.3.1 @PropertySource获取配置文件的值："></a>2.3.1 @PropertySource获取配置文件的值：</h4><pre><code>@ConfigurationProperties(prefix = &quot;person&quot;)
@PropertySource(value = &#123;&quot;classpath:person.properties&quot;&#125;)
</code></pre>
<h4 id="2-3-2-ImportSource：导入Spring配置文件，是配置文件中的配置生效。"><a href="#2-3-2-ImportSource：导入Spring配置文件，是配置文件中的配置生效。" class="headerlink" title="2.3.2 @ImportSource：导入Spring配置文件，是配置文件中的配置生效。"></a>2.3.2 @ImportSource：导入Spring配置文件，是配置文件中的配置生效。</h4><p>SpringBoot默认没有加载Spring配置文件，手动编写的配置文件也无法识别，想让配置文件生效，将@ImportSource标注在主配置类上。</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;bean id=&quot;demoService&quot; class=&quot;com.demo.service.DemoService&quot;/&gt;
&lt;/beans&gt;
</code></pre>
<pre><code class="java">    @Autowired
    private ApplicationContext applicationContext;

    @Test
    public void demoServiceTest() &#123;
        boolean hasDemoService = applicationContext.containsBean(&quot;demoService&quot;);
        System.out.println(hasDemoService);
    &#125;
</code></pre>
<h4 id="2-3-3-SpringBoot推荐的添加组件方式"><a href="#2-3-3-SpringBoot推荐的添加组件方式" class="headerlink" title="2.3.3 SpringBoot推荐的添加组件方式"></a>2.3.3 SpringBoot推荐的添加组件方式</h4><p>SpringBoot推荐给容器中添加组件的方式：使用全注解，@Configuration标注配置类。</p>
<p>@Bean：**<u>将方法的返回值添加到容器中，组件的默认id就是方法名。</u>**</p>
<pre><code class="java">package com.demo.config;

import com.demo.service.DemoService;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

/**
 * @author zhulongkun20@163.com
 * @since 18-9-12 下午9:52
 */
@Configuration
public class AppConfig &#123;
    /**
     * @return
     * @desc 将方法的返回值添加到容器中，组件的默认id就是方法名
     */
    @Bean
    public DemoService demoService() &#123;
        System.out.println(&quot;给容器中添加组件&quot;);
        return new DemoService();
    &#125;
&#125;
</code></pre>
<hr>
<h3 id="2-4-配置文件占位符"><a href="#2-4-配置文件占位符" class="headerlink" title="2.4 配置文件占位符"></a>2.4 配置文件占位符</h3><pre><code class="yaml">server:
  port: 8081

person:
  name: 张三$&#123;random.value&#125;
  age: $&#123;random.int&#125;
  birth: 2018/09/11
  map:
    k1: $&#123;random.value&#125;
    k2: v2
  dog:
    name: $&#123;person.hello:defau&#125;
    age: 4
  alive: true
  classes:
    - v1
    - v2
</code></pre>
<ol>
<li>随机数：</li>
</ol>
<p>${random.value}，${random.int}，${random.long}，${random.int(10)}，${random.int[1,10]}</p>
<ol>
<li>占位符获取配置之前的值，${app.name:默认值}</li>
</ol>
<hr>
<h3 id="2-5-Profile多环境支持"><a href="#2-5-Profile多环境支持" class="headerlink" title="2.5 Profile多环境支持"></a>2.5 Profile多环境支持</h3><blockquote>
<p>profile为不同环境提供不同配置的功能。</p>
</blockquote>
<ol>
<li><p>多profile文件的方式：</p>
<p>在主配置文件编写的时候，文件名可以是application-{profile}.properties&#x2F;application-{profile}.yml；</p>
<p>SpringBoot默认使用全局环境配置</p>
</li>
<li><p>激活指定profile：</p>
<pre><code class="yaml">spring:
  profiles:
    active: dev
</code></pre>
<p><strong>命令行方式：</strong></p>
<p>–spring.profiles.active&#x3D;dev&#x2F;prod</p>
<p><strong>虚拟机参数：</strong></p>
<p>-Dspring.profiles.active&#x3D;dev&#x2F;prod</p>
</li>
<li><p>yaml支持文档块的方式：</p>
<pre><code class="yaml">server:
  port: 8080
spring:
  profiles:
    active: dev
---

server:
  port: 8083
spring:
  profiles: dev
  
---

server:
     port: 8084
spring:
  profiles: prod
</code></pre>
</li>
</ol>
<p>见下图：<img src="https://image.youyou-2608.com/springboot/20180913201726.jpg" alt="厉害了"></p>
<hr>
<h3 id="2-6-配置文件加载位置"><a href="#2-6-配置文件加载位置" class="headerlink" title="2.6 配置文件加载位置"></a>2.6 配置文件加载位置</h3><p>SpringBoot启动会扫描以下位置的application.properties或者application.yml文件作为SpringBoot的默认配置文件：</p>
<ul>
<li>file：.&#x2F;config&#x2F;</li>
<li>file：.&#x2F;</li>
<li>classpath：&#x2F;config&#x2F;</li>
<li>classpath：&#x2F;</li>
</ul>
<p><strong>以上位置优先级从高到低。所有位置的配置文件都会被加载，高优先级的配置会覆盖低优先级的配置，高优先级和低优先级配置文件形成互补配置。</strong></p>
<p>server.context-path&#x3D;&#x2F;config02 -&gt; <a target="_blank" rel="noopener" href="http://localhost:8080/config02/hello.do">http://localhost:8080/config02/hello.do</a></p>
<p><strong>还可以通过spring.config.location来改变默认的配置文件位置(项目打包后可以使用命令行参数的形式启动项目时候来指定配置文件的位置，指定的配置文件和默认加载的配置文件会形成互补配置)。</strong></p>
<p>见下图：</p>
<p><img src="https://image.youyou-2608.com/springboot/20180913202351.jpg" alt="图片丢失"></p>
<hr>
<h3 id="2-7-外部配置文件加载顺序"><a href="#2-7-外部配置文件加载顺序" class="headerlink" title="2.7 外部配置文件加载顺序"></a>2.7 外部配置文件加载顺序</h3><p>SpringBoot也可以从以下位置加载配置文件，优先级从高到低，<strong>高优先级的配置会覆盖低优先级的配置，高低优先级的配置会形成互补配置</strong>。</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#using-boot-devtools-globalsettings">Devtools global settings properties</a> on your home directory (<code>~/.spring-boot-devtools.properties</code> when devtools is active).</li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring/docs/5.0.9.RELEASE/javadoc-api/org/springframework/test/context/TestPropertySource.html"><code>@TestPropertySource</code></a> annotations on your tests.</li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/api/org/springframework/boot/test/context/SpringBootTest.html"><code>@SpringBootTest#properties</code></a> annotation attribute on your tests.</li>
<li>Command line arguments.</li>
<li>Properties from <code>SPRING_APPLICATION_JSON</code> (inline JSON embedded in an environment variable or system property).</li>
<li><code>ServletConfig</code> init parameters.</li>
<li><code>ServletContext</code> init parameters.</li>
<li>JNDI attributes from <code>java:comp/env</code>.</li>
<li>Java System properties (<code>System.getProperties()</code>).</li>
<li>OS environment variables.</li>
<li>A <code>RandomValuePropertySource</code> that has properties only in <code>random.*</code>.</li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-external-config-profile-specific-properties">Profile-specific application properties</a> outside of your packaged jar (<code>application-&#123;profile&#125;.properties</code> and YAML variants).</li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-external-config-profile-specific-properties">Profile-specific application properties</a> packaged inside your jar (<code>application-&#123;profile&#125;.properties</code> and YAML variants).</li>
<li>Application properties outside of your packaged jar (<code>application.properties</code> and YAML variants).</li>
<li>Application properties packaged inside your jar (<code>application.properties</code> and YAML variants).</li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring/docs/5.0.9.RELEASE/javadoc-api/org/springframework/context/annotation/PropertySource.html"><code>@PropertySource</code></a> annotations on your <code>@Configuration</code> classes.</li>
<li>Default properties (specified by setting <code>SpringApplication.setDefaultProperties</code>).</li>
</ol>
<p>由jar包外向jar包内进行查找。</p>
<p>命令行参数（多个参数用空格分开）；</p>
<ul>
<li>java -jar xxx.jar –server.port&#x3D;8081 server.context.path&#x3D;&#x2F;ab</li>
</ul>
<p>优先加载带profile的配置文件。</p>
<ul>
<li>jar包外的application-{profile}或application-{yml}或不带spring.profile的配置文件；</li>
<li>jar包内的application-{profile}或application-{yml}或不带spring.profile的配置文件；</li>
</ul>
<p>再加载带不profile的配置文件。</p>
<ul>
<li><p>jar包外的application-{profile}或application-{yml}或不带spring.profile的配置文件；</p>
</li>
<li><p>jar包内的application-{profile}或application-{yml}或不带spring.profile的配置文件；</p>
</li>
<li><p>@Configuration注解类上的@PropertySource；</p>
</li>
<li><p>通过SpringApplication.setDefaultProperties指定的默认属性。</p>
</li>
</ul>
<p>详细参见SpringBoot官网：<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features">SpringBoot外部配置文件加载顺序</a></p>
<hr>
<h3 id="2-8-自动配置原理"><a href="#2-8-自动配置原理" class="headerlink" title="2.8 自动配置原理"></a>2.8 自动配置原理</h3><p>配置文件能写什么，怎么写？</p>
<p>自动配置原理：</p>
<ol>
<li>SpringBoot在启动的时候加载主配置类，开启了自动配置功能：@EnableAutoConfiguration；</li>
<li>@EnableAutoConfiguration的作用：<ol>
<li>利用@EnableAutoConfigurationImportSelector给容器导入一些组件；</li>
<li>可以查看selectImports中的内容；</li>
<li>List<String> configurations &#x3D; getCandidateConfigurations(annotationMetadata, attributes) 方法；<ul>
<li>SpringFactoriesLoader.loadFactoryNames()；</li>
<li>扫描所有jar包类路径下：META-INF&#x2F;spring.factories；</li>
<li>将扫描到的文件内容加载包装成properties对象。</li>
</ul>
</li>
</ol>
</li>
<li>每一个自动配置类进行功能的自动配置；</li>
<li>所有在配置文件中能配置的属性都在xxxProperties类中配置着，配置文件能配置什么都参照配置文件中的值；</li>
</ol>
<p>SpringBoot的特点：</p>
<ol>
<li>SpringBoot启动时会加载大量的自动配置类；</li>
<li>看SpringBoot有没有自动配置类；</li>
<li>如果有，不用自己再写自动配置类。</li>
<li>给容器中自动配置类添加组件的时候，会从properties类中读取某些属性，我们就可以在配置文件中指定这些属性的值。</li>
</ol>
<hr>
<h3 id="2-9-Conditional自动配置"><a href="#2-9-Conditional自动配置" class="headerlink" title="2.9 @Conditional自动配置"></a>2.9 @Conditional自动配置</h3><blockquote>
<p>自动配置类需要在一定条件下才能生效。</p>
</blockquote>
<p>注解的作用：必须是@Conditional指定的条件成立，才能给容器中添加组件，配置里面的所有内容才生效。</p>
<table>
<thead>
<tr>
<th>@Conditional扩展</th>
<th>作用(判断是否满足当前条件)</th>
</tr>
</thead>
<tbody><tr>
<td>@ConditionalOnJava</td>
<td>系统的Java版本是否符合要求</td>
</tr>
<tr>
<td>@ConditionalOnBean</td>
<td>容器中存在指定的bean</td>
</tr>
<tr>
<td>@ConditionalOnMissingBean</td>
<td>容器中不存在指定的bean</td>
</tr>
<tr>
<td>@ConditionalOnExpression</td>
<td>满足SpEL表达式</td>
</tr>
<tr>
<td>@ConditionalOnClass</td>
<td>容器中有指定的类</td>
</tr>
<tr>
<td>@ConditionalOnMissingClass</td>
<td>容器中没有指定的类</td>
</tr>
<tr>
<td>@ConditionalOnProperty</td>
<td>系统中指定属性是有指定的值</td>
</tr>
<tr>
<td>@ConditionalOnResource</td>
<td>类路径下是否存在指定资源文件</td>
</tr>
<tr>
<td>@ConditionalOnWebApplication</td>
<td>当前是web环境</td>
</tr>
<tr>
<td>@ConditionalOnNotWebApplication</td>
<td>当前不是web环境</td>
</tr>
<tr>
<td>@ConditionalOnJndi</td>
<td>JNDI存在指定项</td>
</tr>
<tr>
<td>@ConditionalOnSingleCandidate</td>
<td>容器中只有一个指定的bean，或者这个bean是首选的bean</td>
</tr>
</tbody></table>
<p>自动配置文件：org&#x2F;springframework&#x2F;boot&#x2F;spring-boot-autoconfigure&#x2F;2.0.5.RELEASE&#x2F;spring-boot-autoconfigure-2.0.5.RELEASE.jar!&#x2F;META-INF&#x2F;spring.factories</p>
<pre><code class="properties"># Auto Configure
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\
org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\
org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\
org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\
org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\
org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\
org.springframework.boot.autoconfigure.cloud.CloudAutoConfiguration,\
org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\
org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\
org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\
org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseReactiveDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseReactiveRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchAutoConfiguration,\
org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.ldap.LdapDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.ldap.LdapRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.mongo.MongoReactiveDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.mongo.MongoReactiveRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.neo4j.Neo4jDataAutoConfiguration,\
org.springframework.boot.autoconfigure.data.neo4j.Neo4jRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.solr.SolrRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\
org.springframework.boot.autoconfigure.data.redis.RedisReactiveAutoConfiguration,\
org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\
org.springframework.boot.autoconfigure.data.rest.RepositoryRestMvcAutoConfiguration,\
org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,\
org.springframework.boot.autoconfigure.elasticsearch.jest.JestAutoConfiguration,\
org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\
org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\
org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\
org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,\
org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,\
org.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,\
org.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,\
org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration,\
org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration,\
org.springframework.boot.autoconfigure.influx.InfluxDbAutoConfiguration,\
org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,\
org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,\
org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\
org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\
org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\
org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\
org.springframework.boot.autoconfigure.jms.JndiConnectionFactoryAutoConfiguration,\
org.springframework.boot.autoconfigure.jms.activemq.ActiveMQAutoConfiguration,\
org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\
org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\
org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration,\
org.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,\
org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration,\
org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\
org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,\
org.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,\
org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,\
org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\
org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\
org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration,\
org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,\
org.springframework.boot.autoconfigure.mongo.MongoReactiveAutoConfiguration,\
org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,\
org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\
org.springframework.boot.autoconfigure.quartz.QuartzAutoConfiguration,\
org.springframework.boot.autoconfigure.reactor.core.ReactorCoreAutoConfiguration,\
org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,\
org.springframework.boot.autoconfigure.security.servlet.SecurityRequestMatcherProviderAutoConfiguration,\
org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration,\
org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration,\
org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration,\
org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration,\
org.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,\
org.springframework.boot.autoconfigure.session.SessionAutoConfiguration,\
org.springframework.boot.autoconfigure.security.oauth2.client.OAuth2ClientAutoConfiguration,\
org.springframework.boot.autoconfigure.solr.SolrAutoConfiguration,\
org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration,\
org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,\
org.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,\
org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration,\
org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration,\
org.springframework.boot.autoconfigure.web.embedded.EmbeddedWebServerFactoryCustomizerAutoConfiguration,\
org.springframework.boot.autoconfigure.web.reactive.HttpHandlerAutoConfiguration,\
org.springframework.boot.autoconfigure.web.reactive.ReactiveWebServerFactoryAutoConfiguration,\
org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration,\
org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration,\
org.springframework.boot.autoconfigure.web.reactive.function.client.WebClientAutoConfiguration,\
org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration,\
org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration,\
org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration,\
org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration,\
org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration,\
org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration,\
org.springframework.boot.autoconfigure.websocket.reactive.WebSocketReactiveAutoConfiguration,\
org.springframework.boot.autoconfigure.websocket.servlet.WebSocketServletAutoConfiguration,\
org.springframework.boot.autoconfigure.websocket.servlet.WebSocketMessagingAutoConfiguration,\
org.springframework.boot.autoconfigure.webservices.WebServicesAutoConfiguration
</code></pre>
<p>开启SpringBoot的debug，可以通过debug&#x3D;true让控制台打印自动配置报告，便可以方便的知道哪些自动配置类生效了。</p>
<pre><code class="text">============================
CONDITIONS EVALUATION REPORT
============================


Positive matches:
-----------------

   CodecsAutoConfiguration matched:
      - @ConditionalOnClass found required class &#39;org.springframework.http.codec.CodecConfigurer&#39;; @ConditionalOnMissingClass did not find unwanted class (OnClassCondition)

   CodecsAutoConfiguration.JacksonCodecConfiguration matched:
      - @ConditionalOnClass found required class &#39;com.fasterxml.jackson.databind.ObjectMapper&#39;; @ConditionalOnMissingClass did not find unwanted class (OnClassCondition)
</code></pre>
<pre><code class="text">Negative matches:
-----------------

   ActiveMQAutoConfiguration:
      Did not match:
         - @ConditionalOnClass did not find required classes &#39;javax.jms.ConnectionFactory&#39;, &#39;org.apache.activemq.ActiveMQConnectionFactory&#39; (OnClassCondition)

   AopAutoConfiguration:
      Did not match:
         - @ConditionalOnClass did not find required classes &#39;org.aspectj.lang.annotation.Aspect&#39;, &#39;org.aspectj.lang.reflect.Advice&#39;, &#39;org.aspectj.weaver.AnnotatedElement&#39; (OnClassCondition)
</code></pre>
<h2 id="第三章-SpringBoot与日志"><a href="#第三章-SpringBoot与日志" class="headerlink" title="第三章 SpringBoot与日志"></a>第三章 SpringBoot与日志</h2><hr>
<h3 id="3-1-日志框架"><a href="#3-1-日志框架" class="headerlink" title="3.1 日志框架"></a>3.1 日志框架</h3><ul>
<li>System.out.println(“welcome!”);  不利于代码维护；</li>
<li>使用日志框架；</li>
<li>加入异步，自动归档等功能；</li>
<li>与程序耦合控制；</li>
<li>统一的接口层：日志门面。</li>
</ul>
<p>常见的日志框架：</p>
<ul>
<li>JUL（java.util.logging）；</li>
<li>JCL；</li>
<li>jboss-logging；</li>
<li>logback；</li>
<li>log4j；</li>
<li>log4j2；</li>
<li>slf4j；</li>
</ul>
<p>日志门面：SLF4J；</p>
<p>日志实现：Logback。</p>
<p>SpringBoot：底层是Spring框架，SpringBoot框架默认是JCL</p>
<p><strong>SpringBoot选用SLF4J，Logback。</strong></p>
<hr>
<h3 id="3-2-SLF4J的使用"><a href="#3-2-SLF4J的使用" class="headerlink" title="3.2 SLF4J的使用"></a>3.2 SLF4J的使用</h3><hr>
<h4 id="3-2-1-如何在系统中使用SLF4J"><a href="#3-2-1-如何在系统中使用SLF4J" class="headerlink" title="3.2.1 如何在系统中使用SLF4J"></a>3.2.1 如何在系统中使用SLF4J</h4><p>开发的时候，日志记录的方法调用，应该直接调用日志抽象层里的方法，而不是日志的实现类。</p>
<p>给系统导入slf4j的jar和logback的实现jar：</p>
<pre><code class="java">import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class HelloWorld &#123;
  public static void main(String[] args) &#123;
    Logger logger = LoggerFactory.getLogger(HelloWorld.class);
    logger.info(&quot;Hello World&quot;);
  &#125;
&#125;
</code></pre>
<p>图示：</p>
<p><img src="https://image.youyou-2608.com/springboot/concrete-bindings.png" alt="具体关系"></p>
<p>每一个日志框架都有自己的配置文件，使用slf4j以后，<strong>配置文件还是作为日志实现框架本身的配置文件。</strong></p>
<hr>
<h4 id="3-2-2-遗留问题"><a href="#3-2-2-遗留问题" class="headerlink" title="3.2.2 遗留问题"></a>3.2.2 遗留问题</h4><p>a（slf4j + logback）：Spring(commons-logging)，Hibernate(jboss-logging)</p>
<p>统一日志记录，即便是别的框架也使用同一日志框架。</p>
<p><img src="https://image.youyou-2608.com/springboot/legacy.png"></p>
<p>如何让系统中所有的日志都统一到slf4j：</p>
<ol>
<li><u>将系统中其他日志框架排除在外；</u></li>
<li><u>用中间适配层包替换原有日志框架；</u></li>
<li><u>导入slf4j其他的实现。</u></li>
</ol>
<hr>
<h3 id="3-3-SpringBoot日志关系"><a href="#3-3-SpringBoot日志关系" class="headerlink" title="3.3 SpringBoot日志关系"></a>3.3 SpringBoot日志关系</h3><pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>SpringBoot的日志功能：</p>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;
    &lt;version&gt;2.0.5.RELEASE&lt;/version&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
<p>SpringBoot底层依赖关系（pom.xml文件，show diagram查看maven项目依赖关系）：</p>
<p><img src="https://image.youyou-2608.com/springboot/irei.png"></p>
<ol>
<li>SpringBoot底层也是用slf4j + logback的方式进行日志记录；</li>
<li>SpringBoot也把其他的日志都替换成了slf4j；</li>
<li>中间替换包；</li>
<li>如果要引入其他框架，一定要把这个框架的默认日志依赖移除。</li>
</ol>
<p><strong>SpringBoot自动适应所有的日志框架，而且底层使用了slf4j + logback的方式记录日志，引入其他框架的时候，只需要把这个框架依赖移除掉。</strong></p>
<hr>
<h3 id="3-4-SpringBoot默认日志配置"><a href="#3-4-SpringBoot默认日志配置" class="headerlink" title="3.4 SpringBoot默认日志配置"></a>3.4 SpringBoot默认日志配置</h3><p>日志的级别，由低到高，可以调整日志输出的级别：</p>
<pre><code class="java">        Logger logger = LoggerFactory.getLogger(getClass());
        //日志的级别，由低到高
        logger.trace(&quot;这是日志...&quot;);
        logger.debug(&quot;这是debug日志...&quot;);
        logger.info(&quot;这是Info信息...&quot;);
        logger.warn(&quot;这是警告...&quot;);
        logger.error(&quot;这是错误信息...&quot;);
</code></pre>
<p>SpringBoot默认日志输出级别为info。</p>
<p>可以在application.yml中自定义日志输出级别： logging.level.com.hape.nmsl&#x3D;trace</p>
<p>在当前项目下生成日志文件：logging.file&#x3D;springboot.log</p>
<p>不指定路径在项目路径下生成日志文件。</p>
<p>logfile优先级高于logpath。</p>
<p>logpath：指定日志文件的路径，默认文件名spring.log。</p>
<p>logging.pattern.console：控制台输出日志的格式。</p>
<p>logging.pattern.file：日志文件输出格式。</p>
<p>日志输出格式：</p>
<pre><code class="properties">%d：表示日期时间；

%thread：表示线程号；

%-5level：级别从左显示5个字符宽度；

%logger&#123;50&#125;：表示logger名字最长50个字符，否则按照句点分割；

%msg：日志信息；

%n：换行符。
</code></pre>
<p>日志格式配置实例：</p>
<pre><code class="properties">%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n
</code></pre>
<hr>
<h3 id="3-5-指定日志文件和日志profile功能"><a href="#3-5-指定日志文件和日志profile功能" class="headerlink" title="3.5 指定日志文件和日志profile功能"></a>3.5 指定日志文件和日志profile功能</h3><p>给类路径下放上每个日志框架自己配置文件即可，</p>
<blockquote>
<p>Because the standard <code>logback.xml</code> configuration file is loaded too early, you cannot use extensions in it. You need to either use <code>logback-spring.xml</code> or define a <code>logging.config</code> property.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Logging System</th>
<th>Customization</th>
</tr>
</thead>
<tbody><tr>
<td>Logback</td>
<td><code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code>, or <code>logback.groovy</code></td>
</tr>
<tr>
<td>Log4j2</td>
<td><code>log4j2-spring.xml</code> or <code>log4j2.xml</code></td>
</tr>
<tr>
<td>JDK (Java Util Logging)</td>
<td><code>logging.properties</code></td>
</tr>
</tbody></table>
<p>logback.xml：直接被日志框架识别；</p>
<p><strong>logback-spring.xml：日志框架不直接加载配置项，由SpringBoot解析日志配置，可以使用SpringBoot的高级功能profile。</strong></p>
<pre><code class="xml">可以指定某一段配置只在某个环境下生效
&lt;springProfile name=&quot;staging&quot;&gt;
    &lt;!-- configuration to be enabled when the &quot;staging&quot; profile is active --&gt;
&lt;/springProfile&gt;

&lt;springProfile name=&quot;dev, staging&quot;&gt;
    &lt;!-- configuration to be enabled when the &quot;dev&quot; or &quot;staging&quot; profiles are active--&gt;
&lt;/springProfile&gt;

&lt;springProfile name=&quot;!production&quot;&gt;
    &lt;!-- configuration to be enabled when the &quot;production&quot; profile is not active --&gt;
&lt;/springProfile&gt;
</code></pre>
<hr>
<h3 id="3-6-切换日志框架"><a href="#3-6-切换日志框架" class="headerlink" title="3.6 切换日志框架"></a>3.6 切换日志框架</h3><p>可以按照slf4j适配图进行相关的切换。</p>
<ol>
<li>排除不使用的包；</li>
<li>导入相关的适配包；</li>
</ol>
<p>不推荐更换SpringBoot默认使用的日志记录框架。</p>
<hr>
<h2 id="第四章-SpringBoot与Web开发"><a href="#第四章-SpringBoot与Web开发" class="headerlink" title="第四章 SpringBoot与Web开发"></a>第四章 SpringBoot与Web开发</h2><p>使用SpringBoot：</p>
<ul>
<li>创建SpringBoot应用，选中需要的模块；</li>
<li>SpringBoot自动配置好场景，需要在配置文件中指定少量配置，即可运行程序；</li>
<li>编写相关的业务逻辑。</li>
</ul>
<p>依赖于SpringBoot的自动配置。</p>
<hr>
<h3 id="4-1-webjar与静态资源映射规则"><a href="#4-1-webjar与静态资源映射规则" class="headerlink" title="4.1 webjar与静态资源映射规则"></a>4.1 webjar与静态资源映射规则</h3><p>SpringBoot对静态资源的映射规则：（WebMvcAutoConfiguration.java）</p>
<pre><code class="java">@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) &#123;
    if (!this.resourceProperties.isAddMappings()) &#123;
        logger.debug(&quot;Default resource handling disabled&quot;);
        return;
    &#125;
    Duration cachePeriod = this.resourceProperties.getCache().getPeriod();
    CacheControl cacheControl = this.resourceProperties.getCache()
        .getCachecontrol().toHttpCacheControl();
    if (!registry.hasMappingForPattern(&quot;/webjars/**&quot;)) &#123;
        customizeResourceHandlerRegistration(registry
                                             .addResourceHandler(&quot;/webjars/**&quot;)
                                             .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;)
                                             .setCachePeriod(getSeconds(cachePeriod))
                                             .setCacheControl(cacheControl));
    &#125;
    String staticPathPattern = this.mvcProperties.getStaticPathPattern();
    if (!registry.hasMappingForPattern(staticPathPattern)) &#123;
        customizeResourceHandlerRegistration(
            registry.addResourceHandler(staticPathPattern)
            .addResourceLocations(getResourceLocations(
                this.resourceProperties.getStaticLocations()))
            .setCachePeriod(getSeconds(cachePeriod))
            .setCacheControl(cacheControl));
    &#125;
&#125;
</code></pre>
<ul>
<li><p>所有的&#x2F;webjars&#x2F;**，都到classpath:&#x2F;META-INF&#x2F;resources&#x2F;webjars找资源；</p>
<p>webjars以jar包的方式引入静态资源。</p>
<p><img src="https://image.youyou-2608.com/springboot/webjars.png"></p>
</li>
</ul>
<p>在访问的时候只需要写webjars下的资源名称即可。（<a target="_blank" rel="noopener" href="http://localhost:8080/webjars/jquery/3.3.1-1/jquery.js%EF%BC%89">http://localhost:8080/webjars/jquery/3.3.1-1/jquery.js）</a></p>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.webjars&lt;/groupId&gt;
    &lt;artifactId&gt;jquery&lt;/artifactId&gt;
    &lt;version&gt;3.3.1-1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<ul>
<li><p>访问当前项目下的任何资源（静态资源的文件夹）</p>
<pre><code class="xml">&quot;classpath:/META-INF/resources/&quot;, 
&quot;classpath:/resources/&quot;,
&quot;classpath:/static/&quot;,
&quot;classpath:/public/&quot;
</code></pre>
</li>
<li><p>配置欢迎页</p>
<pre><code class="java">@Bean
public WelcomePageHandlerMapping welcomePageHandlerMapping(
    ApplicationContext applicationContext) &#123;
    return new WelcomePageHandlerMapping(
        new TemplateAvailabilityProviders(applicationContext),
        applicationContext, getWelcomePage(),
        this.mvcProperties.getStaticPathPattern());
&#125;
</code></pre>
<p>静态文件夹下的所有index.html页面；</p>
<p>映射到 private String staticPathPattern &#x3D; “&#x2F;**”;</p>
</li>
<li><p>配置喜欢的图标</p>
<pre><code class="java">@Configuration
@ConditionalOnProperty(value = &quot;spring.mvc.favicon.enabled&quot;, matchIfMissing = true)
public static class FaviconConfiguration implements ResourceLoaderAware &#123;

    private final ResourceProperties resourceProperties;

    private ResourceLoader resourceLoader;

    public FaviconConfiguration(ResourceProperties resourceProperties) &#123;
        this.resourceProperties = resourceProperties;
    &#125;
</code></pre>
<p>映射到**favicon.ico静态资源文件夹。</p>
</li>
</ul>
<hr>
<h3 id="4-2-引入Thymeleaf模板引擎"><a href="#4-2-引入Thymeleaf模板引擎" class="headerlink" title="4.2 引入Thymeleaf模板引擎"></a>4.2 引入Thymeleaf模板引擎</h3><blockquote>
<p>thymeleaf, jsp, freemaker, velocity</p>
</blockquote>
<p>SpringBoot推荐的thymeleaf：</p>
<ol>
<li>引入thymeleaf；</li>
<li>自定义thymeleaf版本。</li>
</ol>
<pre><code class="xml">&lt;thymeleaf.version&gt;3.0.2.RELEASE&lt;/thymeleaf.version&gt;
&lt;!--布局功能支持程序  thymeleaf3  layout2以上版本适配--&gt;
&lt;thymeleaf.layout.dialect.version&gt;2.1.1&lt;/thymeleaf.layout.dialect.version&gt;
</code></pre>
<hr>
<h3 id="4-3-Thymeleaf语法"><a href="#4-3-Thymeleaf语法" class="headerlink" title="4.3 Thymeleaf语法"></a>4.3 Thymeleaf语法</h3><p>默认请求路径：classpath:templates&#x2F;xxx.html</p>
<p>文档地址：<a target="_blank" rel="noopener" href="https://www.thymeleaf.org/documentation.html">Thymeleaf参考文档</a></p>
<p>使用方法：</p>
<ul>
<li><p>导入Thymeleaf名称空间；</p>
<pre><code class="html">&lt;html lang=&quot;en&quot; xmlns:th=&quot;http:y//www.thymeleaf.org&quot;&gt;
</code></pre>
</li>
<li><p>使用Thymeleaf语法；</p>
<pre><code class="html">&lt;div th:text=&quot;$&#123;hello&#125;&quot;&gt;显示欢迎信息&lt;/div&gt;
</code></pre>
</li>
<li><p>thymeleaf语法规则：</p>
<ul>
<li><p>th:text：改变text文本值；</p>
</li>
<li><p>th:任意属性都可以替换；</p>
</li>
<li><p>文档第十章&#x2F;Attributes&#x2F;优先级；</p>
<p><img src="https://image.youyou-2608.com/springboot/DeepinScreenshot_select-area_20181001125611.png"></p>
</li>
</ul>
</li>
<li><p>thymeleaf表达式；</p>
<pre><code class="properties">Simple expressions:
    Variable Expressions: $&#123;...&#125;
    Selection Variable Expressions: *&#123;...&#125;
    Message Expressions: #&#123;...&#125;
    Link URL Expressions: @&#123;...&#125;
    Fragment Expressions: ~&#123;...&#125;
Literals
    Text literals: &#39;one text&#39; , &#39;Another one!&#39; ,...
    Number literals: 0 , 34 , 3.0 , 12.3 ,...
    Boolean literals: true , false
    Null literal: null
    Literal tokens: one , sometext , main ,...
Text operations:
    String concatenation: +
    Literal substitutions: |The name is $&#123;name&#125;|
    Arithmetic operations:
    Binary operators: + , - , * , / , %
    Minus sign (unary operator): -
Boolean operations:
    Binary operators: and , or
    Boolean negation (unary operator): ! , not
Comparisons and equality:
    Comparators: &gt; , &lt; , &gt;= , &lt;= ( gt , lt , ge , le )
    Equality operators: == , != ( eq , ne )
Conditional operators:
    If-then: (if) ? (then)
    If-then-else: (if) ? (then) : (else)
    Default: (value) ?: (defaultvalue)
Special tokens:
    Page 17 of 106No-Operation: _
</code></pre>
<p>内置对象：</p>
<pre><code class="properties">#ctx : the context object.
#vars: the context variables.
#locale : the context locale.
#request : (only in Web Contexts) the HttpServletRequest object.
#response : (only in Web Contexts) the HttpServletResponse object.
#session : (only in Web Contexts) the HttpSession object.
#servletContext : (only in Web Contexts) the ServletContext object.
</code></pre>
</li>
</ul>
<hr>
<h3 id="4-4-SpringMVC自动配置功能"><a href="#4-4-SpringMVC自动配置功能" class="headerlink" title="4.4 SpringMVC自动配置功能"></a>4.4 SpringMVC自动配置功能</h3><p>SpringBoot文档地址：<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-developing-web-applications">官方文档地址</a></p>
<h4 id="4-4-1-SpringMVC自动配置项"><a href="#4-4-1-SpringMVC自动配置项" class="headerlink" title="4.4.1 SpringMVC自动配置项"></a>4.4.1 SpringMVC自动配置项</h4><p>SpringMVC自动配置：</p>
<ul>
<li>Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver</code> beans.</li>
<li>Support for serving static resources, including support for WebJars (covered <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-static-content">later in this document</a>)).</li>
<li>Automatic registration of <code>Converter</code>, <code>GenericConverter</code>, and <code>Formatter</code> beans.</li>
<li>Support for <code>HttpMessageConverters</code> (covered <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-message-converters">later in this document</a>).</li>
<li>Automatic registration of <code>MessageCodesResolver</code> (covered <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-spring-message-codes">later in this document</a>).</li>
<li>Static <code>index.html</code> support.</li>
<li>Custom <code>Favicon</code> support (covered <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-favicon">later in this document</a>).</li>
<li>Automatic use of a <code>ConfigurableWebBindingInitializer</code> bean (covered <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.0.5.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-web-binding-initializer">later in this document</a>).</li>
</ul>
<pre><code class="java">@Bean
@ConditionalOnBean(ViewResolver.class)
@ConditionalOnMissingBean(name = &quot;viewResolver&quot;, value = ContentNegotiatingViewResolver.class)
public ContentNegotiatingViewResolver viewResolver(BeanFactory beanFactory) &#123;
    ContentNegotiatingViewResolver resolver = new ContentNegotiatingViewResolver();
    resolver.setContentNegotiationManager(
        beanFactory.getBean(ContentNegotiationManager.class));
    // ContentNegotiatingViewResolver uses all the other view resolvers to locate
    // a view so it should have a high precedence
    resolver.setOrder(Ordered.HIGHEST_PRECEDENCE);
    return resolver;
&#125;
</code></pre>
<pre><code class="java">@Override
public void addFormatters(FormatterRegistry registry) &#123;
    for (Converter&lt;?, ?&gt; converter : getBeansOfType(Converter.class)) &#123;
        registry.addConverter(converter);
    &#125;
    for (GenericConverter converter : getBeansOfType(GenericConverter.class)) &#123;
        registry.addConverter(converter);
    &#125;
    for (Formatter&lt;?&gt; formatter : getBeansOfType(Formatter.class)) &#123;
        registry.addFormatter(formatter);
    &#125;
&#125;
</code></pre>
<pre><code class="java">@Override
public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) &#123;
    this.messageConvertersProvider.ifAvailable((customConverters) -&gt; converters
                                               .addAll(customConverters.getConverters()));
&#125;
</code></pre>
<ul>
<li>如果用户有配置(@Bean，@Component)，则使用组合配置；</li>
</ul>
<h4 id="4-4-2-扩展SpringMVC配置"><a href="#4-4-2-扩展SpringMVC配置" class="headerlink" title="4.4.2 扩展SpringMVC配置"></a>4.4.2 扩展SpringMVC配置</h4><p>添加一个配置类并且继承自WebMvcConfigurerAdapter。</p>
<p>将hello.do请求映射到hello.html视图：</p>
<pre><code class="java">package com.web.config;

import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.ViewControllerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;

/**
 * @author zhulongkun20@163.com
 * @since 18-10-1 下午1:51
 */
@Configuration
public class MvcConfig extends WebMvcConfigurerAdapter &#123;
    @Override
    public void addViewControllers(ViewControllerRegistry registry) &#123;
//        super.addViewControllers(registry);
        registry.addViewController(&quot;/hello.do&quot;).setViewName(&quot;/hello.html&quot;);
    &#125;
&#125;
</code></pre>
<ul>
<li>WebMvcAutoConfiguration是SpringMVC的自动配置类；</li>
<li>在做其他自动配置时会导入：@Import(EnableWebMvcConfiguration.class)。</li>
</ul>
<pre><code class="java">@Autowired(required = false)
public void setConfigurers(List&lt;WebMvcConfigurer&gt; configurers) &#123;
    if (!CollectionUtils.isEmpty(configurers)) &#123;
        this.configurers.addWebMvcConfigurers(configurers);
    &#125;
&#125;
</code></pre>
<ul>
<li><p>容器中所有的WebMvcConfiguration都会被调用。</p>
<p>所有的配置都会共同起作用。</p>
</li>
</ul>
<h4 id="4-4-3-全面接管SpringMVC"><a href="#4-4-3-全面接管SpringMVC" class="headerlink" title="4.4.3 全面接管SpringMVC"></a>4.4.3 全面接管SpringMVC</h4><p>在配置类中添加@EnableWebMvc：丢弃所有的自动配置，手动配置所有的配置。</p>
<p>原理：</p>
<p>WebMvc：</p>
<pre><code class="java">@Retention(RetentionPolicy.RUNTIME)
@Target(&#123;ElementType.TYPE&#125;)
@Documented
@Import(&#123;DelegatingWebMvcConfiguration.class&#125;)
public @interface EnableWebMvc &#123;
&#125;
</code></pre>
<p>DelegatingWebMvcConfiguration：</p>
<pre><code class="java">@Configuration
public class DelegatingWebMvcConfiguration extends WebMvcConfigurationSupport &#123;
    private final WebMvcConfigurerComposite configurers = new WebMvcConfigurerComposite();
&#125;
</code></pre>
<p>WebMvcAutoConfiguration：</p>
<pre><code class="java">@Configuration
@ConditionalOnWebApplication(type = Type.SERVLET)
@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class &#125;)
//容器中缺少此组件，该自动配置生效
@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)
@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)
@AutoConfigureAfter(&#123; DispatcherServletAutoConfiguration.class,
        ValidationAutoConfiguration.class &#125;)
</code></pre>
<hr>
<h3 id="4-5-引入资源"><a href="#4-5-引入资源" class="headerlink" title="4.5 引入资源"></a>4.5 引入资源</h3><p>SpringBoot中使用<strong>webjars</strong>引入jquery和bootstrap之类的资源：</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;index&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;webjars/bootstrap/4.1.3/css/bootstrap.css&#125;&quot; th:type=&quot;text/css&quot;/&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><strong>即使更换项目访问名也可以正常加载静态资源。</strong></p>
<pre><code class="java">package com.web.config;

import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.ViewControllerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;

/**
 * @author zhulongkun20@163.com
 * @since 18-10-1 下午1:51
 */
//@EnableWebMvc
@Configuration
public class MvcConfig extends WebMvcConfigurerAdapter &#123;
    @Override
    public void addViewControllers(ViewControllerRegistry registry) &#123;
//        super.addViewControllers(registry);
        registry.addViewController(&quot;/hello.do&quot;).setViewName(&quot;/hello.html&quot;);
        registry.addViewController(&quot;/&quot;).setViewName(&quot;/hello.html&quot;);
    &#125;

    public WebMvcConfigurerAdapter webMvcConfigurerAdapter() &#123;
        return new WebMvcConfigurerAdapter() &#123;
            @Override
            public void addViewControllers(ViewControllerRegistry registry) &#123;
                registry.addViewController(&quot;/&quot;).setViewName(&quot;/hello.html&quot;);
            &#125;
        &#125;;
    &#125;
&#125;
</code></pre>
<hr>
<h3 id="4-6-国际化"><a href="#4-6-国际化" class="headerlink" title="4.6 国际化"></a>4.6 国际化</h3><ol>
<li><strong>编写国际化配置文件；</strong></li>
<li>使用ResourceBundleMessageSource管理国际化资源文件；</li>
<li>在页面使用fmt:message取出国际化内容。</li>
</ol>
<p>配置如下图：</p>
<p><img src="https://image.youyou-2608.com/springboot/international.png"></p>
<p>SpringBoot自动配置（MessageSourceAutoConfiguration.java）：</p>
<pre><code class="java">@Bean
//类路径下配置文件spring.messages
@ConfigurationProperties(prefix = &quot;spring.messages&quot;)
public MessageSourceProperties messageSourceProperties() &#123;
    return new MessageSourceProperties();
&#125;

@Bean
public MessageSource messageSource() &#123;
    MessageSourceProperties properties = messageSourceProperties();
    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
    if (StringUtils.hasText(properties.getBasename())) &#123;
        //设置国际化资源文件的基础名（去除国际语言代码）
        messageSource.setBasenames(StringUtils.commaDelimitedListToStringArray(
            StringUtils.trimAllWhitespace(properties.getBasename())));
    &#125;
    if (properties.getEncoding() != null) &#123;
        messageSource.setDefaultEncoding(properties.getEncoding().name());
    &#125;
    messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale());
    Duration cacheDuration = properties.getCacheDuration();
    if (cacheDuration != null) &#123;
        messageSource.setCacheMillis(cacheDuration.toMillis());
    &#125;
    messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat());
    messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage());
    return messageSource;
&#125;
</code></pre>
<p>设置配置文件地址：</p>
<pre><code class="properties">spring.message=login
</code></pre>
<p>页面中获取国际化资源：</p>
<pre><code class="html">&lt;lable class=&quot;sr-only&quot; th:message=&quot;#&#123;login.tip&#125;&quot;&gt;Tips&lt;/lable&gt;
&lt;lable class=&quot;sr-only&quot; th:message=&quot;#&#123;login.username&#125;&quot;&gt;Username&lt;/lable&gt;
&lt;lable class=&quot;sr-only&quot; th:message=&quot;#&#123;login.password&#125;&quot;&gt;Password&lt;/lable&gt;
&lt;lable class=&quot;sr-only&quot; th:message=&quot;#&#123;login.remember&#125;&quot;&gt;remember&lt;/lable&gt;
</code></pre>
<p>浏览器根据浏览器语言设置的信息自动切换国际化。</p>
<p>SpringMVC区域信息组件：</p>
<pre><code class="java">@Bean
@ConditionalOnMissingBean
@ConditionalOnProperty(prefix = &quot;spring.mvc&quot;, name = &quot;locale&quot;)
public LocaleResolver localeResolver() &#123;
    if (this.mvcProperties
        .getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) &#123;
        return new FixedLocaleResolver(this.mvcProperties.getLocale());
    &#125;
    AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver();
    localeResolver.setDefaultLocale(this.mvcProperties.getLocale());
    return localeResolver;
&#125;
//默认根据请求头获取的区域信息展示国际化信息。
</code></pre>
<p><strong>可以在请求参数上携带区域信息实现国际化：</strong></p>
<pre><code class="html">https://localhost:8080/hello.do?language=zh_CN
https://localhost:8080/hello.do?language=en_US
</code></pre>
<p>手动配置区域信息解析器：</p>
<pre><code class="java">package com.web.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.LocaleResolver;
import org.thymeleaf.util.StringUtils;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.util.Locale;

/**
 * @author zhulongkun20@163.com
 * @since 18-10-3 下午4:43
 */
@Configuration
public class MyLocaleResolver implements LocaleResolver &#123;

    @Override
    public Locale resolveLocale(HttpServletRequest httpServletRequest) &#123;
        String language = httpServletRequest.getParameter(&quot;language&quot;);
        Locale locale = Locale.getDefault();
        if (!StringUtils.isEmpty(language)) &#123;
            String[] regionInfo = language.split(&quot;_&quot;);
            locale = new Locale(regionInfo[0], regionInfo[1]);
        &#125;
        return locale;
    &#125;

    @Override
    public void setLocale(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Locale locale) &#123;
        
    &#125;
&#125;
</code></pre>
<hr>
<h3 id="4-7-拦截器"><a href="#4-7-拦截器" class="headerlink" title="4.7 拦截器"></a>4.7 拦截器</h3><ul>
<li>PostMapping()：RestfulAPI注解；</li>
<li>开发期间禁用Thymeleaf的缓存：spring.thymeleaf.cache&#x3D;false；</li>
<li>错误消息的显示；</li>
<li>防止表单重复提交，添加视图视图映射后，使用重定向。</li>
<li>使用拦截器进行身份校验；</li>
<li>编写拦截器，在配置类中注册拦截器。</li>
<li>页面中使用Thymeleaf获取值。</li>
</ul>
<hr>
<h3 id="4-8-CRUD实验"><a href="#4-8-CRUD实验" class="headerlink" title="4.8 CRUD实验"></a>4.8 CRUD实验</h3><h4 id="4-8-1-实验要求"><a href="#4-8-1-实验要求" class="headerlink" title="4.8.1 实验要求"></a>4.8.1 实验要求</h4><p>实验要求：</p>
<ol>
<li><p>RestfulAPI风格：</p>
<ol>
<li>URI：&#x2F;资源名称&#x2F;资源标识；</li>
<li>HTTP请求方式区分对资源的CRUD操作；</li>
</ol>
<table>
<thead>
<tr>
<th>操作</th>
<th>普通CRUD</th>
<th>RestfulCRUD</th>
</tr>
</thead>
<tbody><tr>
<td>查询</td>
<td>getEmp</td>
<td>emp—GET</td>
</tr>
<tr>
<td>添加</td>
<td>addEmp?xxx</td>
<td>emp—POST</td>
</tr>
<tr>
<td>修改</td>
<td>updateEmp?id&#x3D;xxx&amp;xxx&#x3D;xxx</td>
<td>emp&#x2F;{id}—PUT</td>
</tr>
<tr>
<td>删除</td>
<td>deleteEmp?id&#x3D;1</td>
<td>emp&#x2F;{id}—DELETE</td>
</tr>
</tbody></table>
</li>
<li><p>实验的请求架构：</p>
<table>
<thead>
<tr>
<th></th>
<th>请求URI</th>
<th>请求方式</th>
</tr>
</thead>
<tbody><tr>
<td>查询所有的员工</td>
<td>emps</td>
<td>GET</td>
</tr>
<tr>
<td>查询某个员工</td>
<td>emp&#x2F;{id}</td>
<td>GET</td>
</tr>
<tr>
<td>来到添加界面</td>
<td>emp</td>
<td>GET</td>
</tr>
<tr>
<td>添加员工</td>
<td>emp</td>
<td>POST</td>
</tr>
<tr>
<td>来到修改界面</td>
<td>emp&#x2F;{id}</td>
<td>PUT</td>
</tr>
<tr>
<td>修改员工</td>
<td>emp</td>
<td>PUT</td>
</tr>
<tr>
<td>删除员工</td>
<td>emp&#x2F;{id}</td>
<td>DELETE</td>
</tr>
</tbody></table>
</li>
</ol>
<h4 id="4-8-2-公共页面抽取—列表页"><a href="#4-8-2-公共页面抽取—列表页" class="headerlink" title="4.8.2 公共页面抽取—列表页"></a>4.8.2 公共页面抽取—列表页</h4><ol>
<li><p>利用Thymeleaf抽取公共页面；</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
&lt;body&gt;
&lt;div th:fragment=&quot;copy&quot;&gt;
&amp;copy; 2011 The Good Thymes Virtual Grocery
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
</li>
<li><p>“~{templatename::selector}”：模板名选择器；</p>
<p>~{templatename::fragmentname}：模板名：片断名。</p>
</li>
<li><p>默认效果：</p>
<p>insert片段都在div标签中</p>
<pre><code class="html">&lt;body&gt;
...
&lt;div th:insert=&quot;footer :: copy&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
</code></pre>
</li>
<li><p>三种引入功能片段的th属性：</p>
<ol>
<li><strong>th:insert：将公共片段整个插入到声明引入的元素中；</strong></li>
<li><strong>th:replace：将声明引入的元素替换为公共片段；</strong></li>
<li><strong>th:include：将被引入的片段的内容包含进这个标签中。</strong></li>
</ol>
</li>
</ol>
<hr>
<h4 id="4-8-3-链接高亮-列表完成"><a href="#4-8-3-链接高亮-列表完成" class="headerlink" title="4.8.3 链接高亮&amp;列表完成"></a>4.8.3 链接高亮&amp;列表完成</h4><p><img src="https://image.youyou-2608.com/springboot/paramterizable.png"></p>
<p><strong>实现方法：引入公共片段时传入相关参数，公共片段根据参数高亮相关部分。</strong></p>
<p>Thymeleaf日期工具对象(文档附录 &gt; dates)：</p>
<pre><code class="tex">#dates : methods for java.util.Date objects: formatting, component extraction, etc.
</code></pre>
<pre><code class="properties">$
</code></pre>

  </div>
</article>


    <div class="blog-post-comments">
        <div id="utterances_thread">
            <noscript>加载评论需要在浏览器启用 JavaScript 脚本支持。</noscript>
        </div>
    </div>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">首页</a></li>
        
          <li><a href="/archives/">归档</a></li>
        
          <li><a href="/friends/">友链</a></li>
        
          <li><a href="/about/">关于</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E6%A6%82%E8%A6%81"><span class="toc-number">1.</span> <span class="toc-text">内容概要</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-SpringBoot%E5%85%A5%E9%97%A8"><span class="toc-number">2.</span> <span class="toc-text">第一章 SpringBoot入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-SpringBoot%E7%AE%80%E4%BB%8B"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 SpringBoot简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E5%BE%AE%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.2.</span> <span class="toc-text">1.2 微服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-number">2.3.</span> <span class="toc-text">1.3 开发环境配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%BA%94%E7%94%A8%EF%BC%9AHelloWorld"><span class="toc-number">2.4.</span> <span class="toc-text">1.4 第一个应用：HelloWorld</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-HelloWorld%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6"><span class="toc-number">2.5.</span> <span class="toc-text">1.5 HelloWorld原理探究</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-%E4%B8%BB%E7%A8%8B%E5%BA%8F%E7%B1%BB%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6"><span class="toc-number">2.6.</span> <span class="toc-text">1.6 主程序类原理探究</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-SpringBoot%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E5%99%A8"><span class="toc-number">2.7.</span> <span class="toc-text">1.7 SpringBoot项目初始化器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-SpringBoot%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">第二章 SpringBoot配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-SpringBoot%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 SpringBoot配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-YAML%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 YAML基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%B3%A8%E5%85%A5%EF%BC%9A"><span class="toc-number">3.2.1.</span> <span class="toc-text">2.2.1配置文件注入：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-Value%E6%B3%A8%E5%85%A5%E5%80%BC"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.2.2 @Value注入值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-Value%E5%92%8C-ConfigurationProperties%E8%8E%B7%E5%8F%96%E5%80%BC%E6%AF%94%E8%BE%83%EF%BC%9A"><span class="toc-number">3.2.3.</span> <span class="toc-text">2.2.3 @Value和@ConfigurationProperties获取值比较：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-Value%E5%92%8C-ConfigurationProperties%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">3.2.4.</span> <span class="toc-text">2.2.4 @Value和@ConfigurationProperties的比较</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-PropertySource%E5%92%8C-ImportSource"><span class="toc-number">3.3.</span> <span class="toc-text">2.3 @PropertySource和@ImportSource</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-PropertySource%E8%8E%B7%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E5%80%BC%EF%BC%9A"><span class="toc-number">3.3.1.</span> <span class="toc-text">2.3.1 @PropertySource获取配置文件的值：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-ImportSource%EF%BC%9A%E5%AF%BC%E5%85%A5Spring%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E6%98%AF%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%E7%94%9F%E6%95%88%E3%80%82"><span class="toc-number">3.3.2.</span> <span class="toc-text">2.3.2 @ImportSource：导入Spring配置文件，是配置文件中的配置生效。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-3-SpringBoot%E6%8E%A8%E8%8D%90%E7%9A%84%E6%B7%BB%E5%8A%A0%E7%BB%84%E4%BB%B6%E6%96%B9%E5%BC%8F"><span class="toc-number">3.3.3.</span> <span class="toc-text">2.3.3 SpringBoot推荐的添加组件方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="toc-number">3.4.</span> <span class="toc-text">2.4 配置文件占位符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-Profile%E5%A4%9A%E7%8E%AF%E5%A2%83%E6%94%AF%E6%8C%81"><span class="toc-number">3.5.</span> <span class="toc-text">2.5 Profile多环境支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E4%BD%8D%E7%BD%AE"><span class="toc-number">3.6.</span> <span class="toc-text">2.6 配置文件加载位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-%E5%A4%96%E9%83%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="toc-number">3.7.</span> <span class="toc-text">2.7 外部配置文件加载顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86"><span class="toc-number">3.8.</span> <span class="toc-text">2.8 自动配置原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9-Conditional%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">3.9.</span> <span class="toc-text">2.9 @Conditional自动配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-SpringBoot%E4%B8%8E%E6%97%A5%E5%BF%97"><span class="toc-number">4.</span> <span class="toc-text">第三章 SpringBoot与日志</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 日志框架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-SLF4J%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 SLF4J的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-%E5%A6%82%E4%BD%95%E5%9C%A8%E7%B3%BB%E7%BB%9F%E4%B8%AD%E4%BD%BF%E7%94%A8SLF4J"><span class="toc-number">4.2.1.</span> <span class="toc-text">3.2.1 如何在系统中使用SLF4J</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-%E9%81%97%E7%95%99%E9%97%AE%E9%A2%98"><span class="toc-number">4.2.2.</span> <span class="toc-text">3.2.2 遗留问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-SpringBoot%E6%97%A5%E5%BF%97%E5%85%B3%E7%B3%BB"><span class="toc-number">4.3.</span> <span class="toc-text">3.3 SpringBoot日志关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-SpringBoot%E9%BB%98%E8%AE%A4%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE"><span class="toc-number">4.4.</span> <span class="toc-text">3.4 SpringBoot默认日志配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E6%8C%87%E5%AE%9A%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E5%92%8C%E6%97%A5%E5%BF%97profile%E5%8A%9F%E8%83%BD"><span class="toc-number">4.5.</span> <span class="toc-text">3.5 指定日志文件和日志profile功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E5%88%87%E6%8D%A2%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6"><span class="toc-number">4.6.</span> <span class="toc-text">3.6 切换日志框架</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-SpringBoot%E4%B8%8EWeb%E5%BC%80%E5%8F%91"><span class="toc-number">5.</span> <span class="toc-text">第四章 SpringBoot与Web开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-webjar%E4%B8%8E%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84%E8%A7%84%E5%88%99"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 webjar与静态资源映射规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%BC%95%E5%85%A5Thymeleaf%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 引入Thymeleaf模板引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-Thymeleaf%E8%AF%AD%E6%B3%95"><span class="toc-number">5.3.</span> <span class="toc-text">4.3 Thymeleaf语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-SpringMVC%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8A%9F%E8%83%BD"><span class="toc-number">5.4.</span> <span class="toc-text">4.4 SpringMVC自动配置功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-1-SpringMVC%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">5.4.1.</span> <span class="toc-text">4.4.1 SpringMVC自动配置项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-2-%E6%89%A9%E5%B1%95SpringMVC%E9%85%8D%E7%BD%AE"><span class="toc-number">5.4.2.</span> <span class="toc-text">4.4.2 扩展SpringMVC配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-3-%E5%85%A8%E9%9D%A2%E6%8E%A5%E7%AE%A1SpringMVC"><span class="toc-number">5.4.3.</span> <span class="toc-text">4.4.3 全面接管SpringMVC</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E5%BC%95%E5%85%A5%E8%B5%84%E6%BA%90"><span class="toc-number">5.5.</span> <span class="toc-text">4.5 引入资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-number">5.6.</span> <span class="toc-text">4.6 国际化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">5.7.</span> <span class="toc-text">4.7 拦截器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-CRUD%E5%AE%9E%E9%AA%8C"><span class="toc-number">5.8.</span> <span class="toc-text">4.8 CRUD实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-1-%E5%AE%9E%E9%AA%8C%E8%A6%81%E6%B1%82"><span class="toc-number">5.8.1.</span> <span class="toc-text">4.8.1 实验要求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-2-%E5%85%AC%E5%85%B1%E9%A1%B5%E9%9D%A2%E6%8A%BD%E5%8F%96%E2%80%94%E5%88%97%E8%A1%A8%E9%A1%B5"><span class="toc-number">5.8.2.</span> <span class="toc-text">4.8.2 公共页面抽取—列表页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-3-%E9%93%BE%E6%8E%A5%E9%AB%98%E4%BA%AE-%E5%88%97%E8%A1%A8%E5%AE%8C%E6%88%90"><span class="toc-number">5.8.3.</span> <span class="toc-text">4.8.3 链接高亮&amp;列表完成</span></a></li></ol></li></ol></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zhu.happy365.day/2019/01/01/110f3650bd4f/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li> -->
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&text=SpringBoot基础学习笔记"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&title=SpringBoot基础学习笔记"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&is_video=false&description=SpringBoot基础学习笔记"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li> -->
  <li><a class="icon" href="mailto:?subject=SpringBoot基础学习笔记&body=Check out this article: https://zhu.happy365.day/2019/01/01/110f3650bd4f/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&title=SpringBoot基础学习笔记"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&title=SpringBoot基础学习笔记"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&title=SpringBoot基础学习笔记"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&title=SpringBoot基础学习笔记"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&name=SpringBoot基础学习笔记&description=&lt;h2 id=&#34;内容概要&#34;&gt;&lt;a href=&#34;#内容概要&#34; class=&#34;headerlink&#34; title=&#34;内容概要&#34;&gt;&lt;/a&gt;内容概要&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;SpringBoot入门&lt;/li&gt;
&lt;li&gt;SpringBoot配置&lt;/li&gt;
&lt;li&gt;SpringBoot与日志&lt;/li&gt;
&lt;li&gt;SpringBoot与Web开发&lt;/li&gt;
&lt;li&gt;SpringBoot与Docker&lt;/li&gt;
&lt;li&gt;SpringBoot与数据访问&lt;/li&gt;
&lt;li&gt;SpringBoot启动配置原理&lt;/li&gt;
&lt;li&gt;SpringBoot自定义Starters&lt;/li&gt;
&lt;li&gt;SpringBoot与缓存&lt;/li&gt;
&lt;li&gt;SpringBoot与消息&lt;/li&gt;
&lt;li&gt;SpringBoot与检索&lt;/li&gt;
&lt;li&gt;SpringBoot与任务&lt;/li&gt;
&lt;li&gt;SpringBoot与安全&lt;/li&gt;
&lt;li&gt;SpringBoot与分布式&lt;/li&gt;
&lt;li&gt;SpringBoot与开发热部署&lt;/li&gt;
&lt;li&gt;SpringBoot与监控管理&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;第一章-SpringBoot入门&#34;&gt;&lt;a href=&#34;#第一章-SpringBoot入门&#34; class=&#34;headerlink&#34; title=&#34;第一章 SpringBoot入门&#34;&gt;&lt;/a&gt;第一章 SpringBoot入门&lt;/h2&gt;&lt;h3 id=&#34;1-1-SpringBoot简介&#34;&gt;&lt;a href=&#34;#1-1-SpringBoot简介&#34; class=&#34;headerlink&#34; title=&#34;1.1 SpringBoot简介&#34;&gt;&lt;/a&gt;1.1 SpringBoot简介&lt;/h3&gt;&lt;p&gt;特点：约定大于配置；去繁从简；&lt;/p&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li> -->
  <!-- <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://zhu.happy365.day/2019/01/01/110f3650bd4f/&t=SpringBoot基础学习笔记"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li> -->
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    <!-- Copyright --> &copy;
    
    
    2018-2025
    zhu
  </div>
  <div class="footer-center">
    
      <a href="https://icp.gov.moe/?keyword=20249900" target="_blank">萌ICP备20249900号</a>
    
    
      
        <span> | </span>
      
      <a href="https://www.travellings.cn/go.html" target="_blank">🚇开往</a>
    
    
      
        <span> | </span>
      
      <a href="https://www.foreverblog.cn" target="_blank">十年之约</a>
    
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/archives/">归档</a></li><!--
     --><!--
       --><li><a href="/friends/">友链</a></li><!--
     --><!--
       --><li><a href="/about/">关于</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板！\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功！");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

  <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?8bdf047ae0a66729bd3b27e8bb56fe11";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      </script>

<!-- 51la Analytics -->

  <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
  <script>
  LA.init({
      id: '3I0QIERSX42bDzDc',
      ck: '3I0QIERSX42bDzDc'
  })
  </script>

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

    <script type="text/javascript">
      var utterances_repo = 'lozhu20/my-blog-comments';
      var utterances_issue_term = 'pathname';
      var utterances_label = 'Comment';
      var utterances_theme = 'github-light';

      (function(){
          var script = document.createElement('script');

          script.src = 'https://utteranc.es/client.js';
          script.setAttribute('repo', utterances_repo);
          script.setAttribute('issue-term', 'pathname');
          script.setAttribute('label', utterances_label);
          script.setAttribute('theme', utterances_theme);
          script.setAttribute('crossorigin', 'anonymous');
          script.async = true;
          (document.getElementById('utterances_thread')).appendChild(script);
      }());
  </script>

<!-- image modal -->
<script>
  (function() {
    var contentNode = document.getElementsByClassName('content e-content');
    if (!contentNode || contentNode.length === 0) {
      console.log('no content, exit');
      return;
    }

    var imgsNodes = contentNode[0].getElementsByTagName('img');
    if (!imgsNodes || imgsNodes.length === 0) {
      console.log('no image, exit');
      return;
    }

    var span = document.getElementById('modal_close_btn');
    span.onclick = function() { 
      modal.style.display = "none";
    };

    var modal = document.getElementById('modal');
    var modalImage = document.getElementById('modal_image');
    var captionText = document.getElementById('caption');

    for (var i = imgsNodes.length - 1; i >= 0; i--) {
      let image = imgsNodes[i];
      image.onclick = function() {
        modal.style.display = "block";
        modalImage.src = this.src;
        captionText.innerHTML = this.alt || "文章配图";
      };
    }
  }());
</script>

</body>
</html>
